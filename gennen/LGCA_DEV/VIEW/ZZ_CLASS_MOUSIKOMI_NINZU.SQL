CREATE OR REPLACE VIEW ZZ_CLASS_MOUSIKOMI_NINZU
    (KAMOKU_CODE,CLASS_CODE,CLASS_MEI,MOUSIKOMI,TEIIN)
AS
select L02.KAMOKU_CODE
       ,L02.CLASS_CODE
       ,L02.CLASS_MEI
       ,count(L02.CLASS_CODE) as MOUSIKOMI
       ,L02.TEIIN
from L02_CLASS_TBL L02
  inner join L15_MOUSIKOMI_JYOKYO_TBL L15
    on (L02.KAMOKU_CODE = L15.KAMOKU_CODE and L02.CLASS_CODE = L15.CLASS_CODE)
    where (L15.STATUS = '1' and L15.UKETSUKE_JYOTAI = '2')
    group by L02.KAMOKU_CODE, L02.CLASS_CODE, L02.CLASS_MEI, L02.TEIIN
/
COMMENT ON TABLE ZZ_CLASS_MOUSIKOMI_NINZU IS 'ZZ_クラス別申込対象人数ビュー'
/
COMMENT ON COLUMN ZZ_CLASS_MOUSIKOMI_NINZU.KAMOKU_CODE IS '科目コード'
/
COMMENT ON COLUMN ZZ_CLASS_MOUSIKOMI_NINZU.CLASS_CODE IS 'クラスコード'
/
COMMENT ON COLUMN ZZ_CLASS_MOUSIKOMI_NINZU.CLASS_MEI IS 'クラス名'
/
COMMENT ON COLUMN ZZ_CLASS_MOUSIKOMI_NINZU.MOUSIKOMI IS '申込人数'
/
COMMENT ON COLUMN ZZ_CLASS_MOUSIKOMI_NINZU.TEIIN IS '定員'
/
